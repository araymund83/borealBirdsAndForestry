# Extract S1 : We ran three models at the local scale and four at the neighborhood scale for each of 15 
# songbird species. Sample size refers to the number of surveys used to evaluate each question. Random 
# effects and offsets were consistent in all models. “BCR” stands for “Bird Conservation Region”. “Jurisdiction” 
# indicates the political jurisdiction (i.e., Canadian Provinces and Territories). “LCC” stands for “Land Cover 
# Class”.

library("reproducible")
library("data.table")
dt <- data.table(prepInputs(url = "https://drive.google.com/open?id=13eHQmibKxOrP1OwGbQEVyqi90rsUzGeo",
                            destinationPath = getwd(), fun = "data.table::fread", 
                            filename2 = NULL))

localBoth <- NROW(dt)
localUndisturbed <- NROW(dt[State_P_100 == 0])
localSuccesional <- NROW(dt[State_P_100 > 0 & Agent_L == "Transitional"]) + localUndisturbed
localAlienating <- NROW(dt[State_P_100 > 0 & Agent_L != "Transitional"]) + localUndisturbed

neighBoth <- NROW(dt)
neighUndisturbed <- NROW(dt[State_P_500 == 0])
neighSuccesional <- NROW(dt[State_P_500 > 0 & Agent_N == "Transitional"]) + neighUndisturbed
neighAlienating <- NROW(dt[State_P_500 > 0 & Agent_N != "Transitional"]) + neighUndisturbed
neighBothUnds <- NROW(dt[State_P_500 > 0 &
                           State_P_100 == 0]) + neighUndisturbed
neighAlienatingUnds <- NROW(dt[State_P_500 > 0 & Agent_N != "Transitional" &
                              State_P_100 == 0]) + neighUndisturbed
neighSuccesionalUnds <- NROW(dt[State_P_500 > 0 & Agent_N == "Transitional" &
                                  State_P_100 == 0]) + neighUndisturbed

SampleSize <- data.table(sampleSize = c(localBoth,
                                        localAlienating,
                                        localSuccesional,
                                        neighBoth,
                                        neighAlienating,
                                        neighSuccesional,
                                        neighBothUnds,
                                        neighAlienatingUnds,
                                        neighSuccesionalUnds))
footNote <- data.table(footNote = c(localUndisturbed,
                                    neighUndisturbed))
                                        
print(SampleSize)
print(footNote)

# ==========================================================================================
# Table S2: Avian surveys were grouped by cluster and by year of sampling. This table shows 
# the number of clusters, surveys, and whether they were disturbed or undisturbed at the local 
# and neighborhood scale for each year of sampling. We identified a total of 483 non-overlapping 
# clusters; however, as some clusters contained stations that were surveyed in multiple years, 
# the sum of clusters across years is 702. 

dt <- dt[order(YYYY)]
dt <- dt[, .("sumClu" = length(unique(ClusterSP)), 
              "sumSurv" = .N,
              "LocalDist" = sum(State_P_100 > 0),
              "LocalUndist" = sum(State_P_100 == 0),
              "NeighDist" = sum(State_P_500 > 0),
              "NeighUndist" = sum(State_P_500 == 0)) , by = YYYY]
print(dt)
